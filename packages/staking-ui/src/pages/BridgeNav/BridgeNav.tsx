import {Button, Divider} from "antd";
import {observer} from "mobx-react";
import {ReactElement} from "react";
import {useBasStore} from "../../stores";
import {BigNumber} from "bignumber.js";

const CROSS_CHAIN_BRIDGE_ABI = require('./CrossChainBridge.json')

const CHAPEL_BRIDGE_ADDRESS = '0x8d4ff6Ec7568D683172864cdA81eDE312Dc613c9';
const DEV_BRIDGE_ADDRESS = '0xef19228b501B0986Cb693BfaA08776705671045B';

export const BridgeNav = observer((): ReactElement => {
  return (
    <div>
      <Divider/>
      <Button size="large" type="primary" onClick={async () => {
        const amount = prompt("Input amount of tokens to transfer: ")
        if (!amount) return;
        const sdk = useBasStore().getBasSdk();
        const {web3} = sdk.getKeyProvider();
        const devBridge = new web3!.eth.Contract(CROSS_CHAIN_BRIDGE_ABI, DEV_BRIDGE_ADDRESS)
        const myAddress = sdk.getKeyProvider().getMyAddress()
        const inputData = devBridge.methods.deposit('97', myAddress).encodeABI();
        const tx = await sdk.getKeyProvider().sendTx({
          to: DEV_BRIDGE_ADDRESS,
          data: inputData,
          value: new BigNumber(amount).multipliedBy(10 ** 18).toString(10),
        })
        console.log(tx);
      }}>
        Deposit to bridge
      </Button>
      <Divider/>
      <Button size="large" type="primary" onClick={async () => {
        const PROOF = {
          blockProofs: [
            "0xf9025ba0fa6b98297c8d63f80fce3e273b5056764aa2bb18165a9b59b881463766aef6b9a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794751aaca849b09a3e347bbfe125cf18423cc24b40a06380f88ad740e7ca74bcddaf4a63306b06db82ef27a5833910e08a9c8cc0b7e7a0bdbc07cb86a92d69b15485571028a3dc16a91791027fc9fe632d97d876d370fda0b39d2d09ea9310044eae04a5dd905a2f568e229e13f8508a2cdf04d4ab986183b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000008000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000080001000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000283167a4e837a120082ef648462bcbd81b861d983010108846765746889676f312e31362e3135856c696e757800002accea127a6f1afc14375f04d4c8d3af297db26ffd39c64154d0859b2df17da4b8a999700f7b2987bfcf7cdcfd95693ab6095441b2d20f5f0ffb1fa677150c8878ed473601a00000000000000000000000000000000000000000000000000000000000000000880000000000000000",
            "0xf90259a0ae2b9bca41d7bb46b9b637063b7a73cb6f04a105484f34b4d3b035c5f1ee622ba01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347948e1ea6eaa09c3b40f4a51fcd056a031870a0549aa06380f88ad740e7ca74bcddaf4a63306b06db82ef27a5833910e08a9c8cc0b7e7a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000283167a4f837a1200808462bcbd84b861d983010108846765746889676f312e31362e3135856c696e757800002accea1200facf7c7e6be510c2048becace5e3bfb64b445f38be97520ab1438b24fbcae73d0a1f77f7c5ca5c5c3396b1fe264ea495142ab5ee1288d358f1605a0a34a8f701a00000000000000000000000000000000000000000000000000000000000000000880000000000000000",
            "0xf90259a0c1048547585091b3186298c9683fda44bcb3b33ef9fc7657a259340a123a9712a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794a6ff33e3250cc765052ac9d7f7dfebda183c4b9ba06380f88ad740e7ca74bcddaf4a63306b06db82ef27a5833910e08a9c8cc0b7e7a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000283167a50837a1200808462bcbd87b861d983010108846765746889676f312e31362e3135856c696e757800002accea12e8d8bbf8694dbd0dbf725e7e3d947597a68e9b13994d556f8409505738e8b69f1b0fff5572d66517c0b7782ea7aed7b960d33194eecc60aac145d0b0ed0ecf7601a00000000000000000000000000000000000000000000000000000000000000000880000000000000000",
            "0xf90259a08d56a871d41b2966ff5a539464b7500e02b72c5dfee1360506a3c2b648201d62a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479408fae3885e299c24ff9841478eb946f41023ac69a06380f88ad740e7ca74bcddaf4a63306b06db82ef27a5833910e08a9c8cc0b7e7a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000283167a51837a1200808462bcbd8ab861d983010108846765746889676f312e31362e3135856c696e757800002accea1258e1add12e52b3545206b4a1732b7237b3c1a98b6dd198928886fbf52bb5faf6765635ec82cc65eb36a6edc26ce4e70e791b37638e371714c4f28c25a407d87001a00000000000000000000000000000000000000000000000000000000000000000880000000000000000",
            "0xf90259a02e384018c87e5ba6215ca8f886b0d744d8f12ff7c5d29ecfb0755897789081fea01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479449c0f7c8c11a4c80dc6449efe1010bb166818da8a06380f88ad740e7ca74bcddaf4a63306b06db82ef27a5833910e08a9c8cc0b7e7a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000283167a52837a1200808462bcbd8db861d983010108846765746889676f312e31362e3135856c696e757800002accea12e62f7ddcd0d0c32ac21fadbd76d988b7279f88fff5f413b7d2bf1df0fd9a268c2df25b0cef0e40641109c913a6ef09cc3adac9c8dc741e1973a00bf31c6e9f0b00a00000000000000000000000000000000000000000000000000000000000000000880000000000000000",
          ],
          rawReceipt: '0xf9028a0182998cb9010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000800000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000008000100000000000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000f90180f9017d94ef19228b501b0986cb693bfaa08776705671045bf863a002a26718fb44a93ea1e7af937782f8535ae91583cb5342c1761daf153331df27a0000000000000000000000000390a4cedbb65be7511d9e1a35b115376f39dbdf3a0000000000000000000000000390a4cedbb65be7511d9e1a35b115376f39dbdf3b901000000000000000000000000000000000000000000000000000000000000000061000000000000000000000000680ad73976ccbc8eb21e8f21ed2f2d6c2b73e0a900000000000000000000000027de5115cc3c2bd87eb8557ee75d1b178524f27a0000000000000000000000000000000000000000000000000de0b6b3a76400004241530000000000000000000000000000000000000000000000000000000000424153000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036b0000000000000000000000000680ad73976ccbc8eb21e8f21ed2f2d6c2b73e0a9',
          proofPath: '0x0080',
          proofSiblings: '0xf902e7f851a075ccfb7589fe60e05b1b875a2128114e9aec6902ed423fe30f027efa40329a2b80808080808080a055e744c6ae109cc8aae85137168ef0ed999455c75f24904e2fa4eb7e0be9e05d8080808080808080f9029130b9028df9028a0182998cb9010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000800000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000008000100000000000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000f90180f9017d94ef19228b501b0986cb693bfaa08776705671045bf863a002a26718fb44a93ea1e7af937782f8535ae91583cb5342c1761daf153331df27a0000000000000000000000000390a4cedbb65be7511d9e1a35b115376f39dbdf3a0000000000000000000000000390a4cedbb65be7511d9e1a35b115376f39dbdf3b901000000000000000000000000000000000000000000000000000000000000000061000000000000000000000000680ad73976ccbc8eb21e8f21ed2f2d6c2b73e0a900000000000000000000000027de5115cc3c2bd87eb8557ee75d1b178524f27a0000000000000000000000000000000000000000000000000de0b6b3a76400004241530000000000000000000000000000000000000000000000000000000000424153000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036b0000000000000000000000000680ad73976ccbc8eb21e8f21ed2f2d6c2b73e0a9',
        };
        const sdk = useBasStore().getBasSdk();
        const {web3} = sdk.getKeyProvider();
        const chapelBridge = new web3!.eth.Contract(CROSS_CHAIN_BRIDGE_ABI, CHAPEL_BRIDGE_ADDRESS);
        const inputData = chapelBridge.methods.withdraw(
          PROOF.blockProofs,
          PROOF.rawReceipt,
          PROOF.proofPath,
          PROOF.proofSiblings,
        ).encodeABI();
        const tx = await sdk.getKeyProvider().sendTx({
          to: CHAPEL_BRIDGE_ADDRESS,
          data: inputData,
        })
        console.log(tx);
      }}>
        Withdraw from bridge
      </Button>
    </div>
  );
})