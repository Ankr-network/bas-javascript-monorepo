import {Button, Divider} from "antd";
import {observer} from "mobx-react";
import {ReactElement} from "react";
import {useBasStore} from "../../stores";
import {BigNumber} from "bignumber.js";

const CROSS_CHAIN_BRIDGE_ABI = require('./CrossChainBridge.json')

const DEV_BRIDGE_ADDRESS = '0x512207bF85941504F216028FAfB8C5664Bc586FC';
const CHAPEL_BRIDGE_ADDRESS = '0x0ecBf01e3D14D0300d9dD64a82ff8d99E7751Da7';

export const BridgeNav = observer((): ReactElement => {
  return (
    <div>
      <Divider/>
      <Button size="large" type="primary" onClick={async () => {
        const amount = prompt("Input amount of tokens to transfer: ")
        if (!amount) return;
        const sdk = useBasStore().getBasSdk();
        const {web3} = sdk.getKeyProvider();
        const devBridge = new web3!.eth.Contract(CROSS_CHAIN_BRIDGE_ABI, DEV_BRIDGE_ADDRESS)
        const myAddress = sdk.getKeyProvider().getMyAddress()
        const inputData = devBridge.methods.deposit('97', myAddress).encodeABI();
        const tx = await sdk.getKeyProvider().sendTx({
          to: DEV_BRIDGE_ADDRESS,
          data: inputData,
          value: new BigNumber(amount).multipliedBy(10 ** 18).toString(10),
        })
        console.log(tx);
      }}>
        Deposit to bridge
      </Button>
      <Divider/>
      <Button size="large" type="primary" onClick={async () => {
        const PROOF = {
          blockProofs: [
            "0xf9025ba0f28d86bad65d933558561de16e5b8f7c3707bb59e3854e6a8e69a533c3c24556a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794a6ff33e3250cc765052ac9d7f7dfebda183c4b9ba014a0aa650ea164b8249355f16346f564529587925417fbb0bd89676022b7b905a0781014825b72c492a248f421ebfa7cf252aec42aab312bab35cd8d0827a5488aa0dabb18a44cdb591db6ef3119004dde590699b29ac4abbd41c59f5a7789330ad7b901000000000000000000000040000000000000000000000080000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000800010000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000002831678de837a120082ef648462bcb931b861d983010108846765746889676f312e31362e3135856c696e757800002accea12ebe35005d70d39c2dc756c637cdf79afa1460081a71fa08234bcdb47482415f86420d1c496f2c3392a48679c7bb0cd328d86697920783ffd1564cee2e1de139800a00000000000000000000000000000000000000000000000000000000000000000880000000000000000",
            "0xf90259a011e99eb85b459386fcd84a701fb280543656177358380173574c71d91c163ea3a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479408fae3885e299c24ff9841478eb946f41023ac69a014a0aa650ea164b8249355f16346f564529587925417fbb0bd89676022b7b905a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b901000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002831678df837a1200808462bcb934b861d983010108846765746889676f312e31362e3135856c696e757800002accea12db9d7ab42d4318b82c81351250dd96398977bb5e53ae63b16829794d13f3cb6553d809160c9f3593dd415ae1469c7179a36996e299d5c102b3ca2699f333a79e00a00000000000000000000000000000000000000000000000000000000000000000880000000000000000",
            "0xf90259a03f707589f756732383ec2ab30ef4a7fb0528d03fea815ad1aad31bac03b3f4a2a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479449c0f7c8c11a4c80dc6449efe1010bb166818da8a014a0aa650ea164b8249355f16346f564529587925417fbb0bd89676022b7b905a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b901000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002831678e0837a1200808462bcb937b861d983010108846765746889676f312e31362e3135856c696e757800002accea12662ffcf016a7c610afd92656a7e0eafe6c68299b5930461972d36e3f3854f6b312bd2f9496a47ccc785383318fb9c6767309fb0c7f81bb48d59f92a3471880d400a00000000000000000000000000000000000000000000000000000000000000000880000000000000000",
            "0xf90259a018d6c1d063e998cf8697f6e0b214f7129802ad422d07209d244ac784d38300b3a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794751aaca849b09a3e347bbfe125cf18423cc24b40a014a0aa650ea164b8249355f16346f564529587925417fbb0bd89676022b7b905a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b901000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002831678e1837a1200808462bcb93ab861d983010108846765746889676f312e31362e3135856c696e757800002accea1279b16a7b235f791d5e48a0066bf5966bf73c932d3fb31cdfd76d9d23b8cdce9054776a9e7b09e6920b87f373d30a9614bc7a7ea0b56af16dc8415027860cc5a401a00000000000000000000000000000000000000000000000000000000000000000880000000000000000",
            "0xf90259a0fbea41c0aa86ce135817cca1cbe15b5f0c6e36e7ea84913abe54c60dce653ea3a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347948e1ea6eaa09c3b40f4a51fcd056a031870a0549aa014a0aa650ea164b8249355f16346f564529587925417fbb0bd89676022b7b905a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b901000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002831678e2837a1200808462bcb93db861d983010108846765746889676f312e31362e3135856c696e757800002accea12cd0ae583771eec7fa16babed945f75451299758c927382d52b7fec6e104061396df02f8b6e7fe704e29223455476fb01d1700fc115711ceff4b7964ccf1c114101a00000000000000000000000000000000000000000000000000000000000000000880000000000000000",
          ],
          rawReceipt: '0xf9028a0182998cb9010000000000000000000000400000000000000000000000800000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000008000100000000000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000f90180f9017d94512207bf85941504f216028fafb8c5664bc586fcf863a002a26718fb44a93ea1e7af937782f8535ae91583cb5342c1761daf153331df27a0000000000000000000000000390a4cedbb65be7511d9e1a35b115376f39dbdf3a0000000000000000000000000390a4cedbb65be7511d9e1a35b115376f39dbdf3b901000000000000000000000000000000000000000000000000000000000000000061000000000000000000000000680ad73976ccbc8eb21e8f21ed2f2d6c2b73e0a90000000000000000000000006fa3a764190b840375a91d5a2c0398736a0f29d20000000000000000000000000000000000000000000000000de0b6b3a76400004241530000000000000000000000000000000000000000000000000000000000424153000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036b0000000000000000000000000680ad73976ccbc8eb21e8f21ed2f2d6c2b73e0a9',
          proofPath: '0x0080',
          proofSiblings: '0xf902e7f851a075ccfb7589fe60e05b1b875a2128114e9aec6902ed423fe30f027efa40329a2b80808080808080a03e31b0bba3fd147dbe940d92ced97f3a390f76aa0f578c5576f7780d0df54dcf8080808080808080f9029130b9028df9028a0182998cb9010000000000000000000000400000000000000000000000800000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000008000100000000000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000f90180f9017d94512207bf85941504f216028fafb8c5664bc586fcf863a002a26718fb44a93ea1e7af937782f8535ae91583cb5342c1761daf153331df27a0000000000000000000000000390a4cedbb65be7511d9e1a35b115376f39dbdf3a0000000000000000000000000390a4cedbb65be7511d9e1a35b115376f39dbdf3b901000000000000000000000000000000000000000000000000000000000000000061000000000000000000000000680ad73976ccbc8eb21e8f21ed2f2d6c2b73e0a90000000000000000000000006fa3a764190b840375a91d5a2c0398736a0f29d20000000000000000000000000000000000000000000000000de0b6b3a76400004241530000000000000000000000000000000000000000000000000000000000424153000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036b0000000000000000000000000680ad73976ccbc8eb21e8f21ed2f2d6c2b73e0a9',
        };
        const sdk = useBasStore().getBasSdk();
        const {web3} = sdk.getKeyProvider();
        const chapelBridge = new web3!.eth.Contract(CROSS_CHAIN_BRIDGE_ABI, CHAPEL_BRIDGE_ADDRESS);
        const inputData = chapelBridge.methods.withdraw(
          PROOF.blockProofs,
          PROOF.rawReceipt,
          PROOF.proofPath,
          PROOF.proofSiblings,
        ).encodeABI();
        const tx = await sdk.getKeyProvider().sendTx({
          to: CHAPEL_BRIDGE_ADDRESS,
          data: inputData,
        })
        console.log(tx);
      }}>
        Withdraw from bridge
      </Button>
    </div>
  );
})